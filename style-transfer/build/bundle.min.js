!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var n in o)("object"==typeof exports?exports:e)[n]=o[n]}}(self,(()=>(()=>{const e=document.getElementById("displayCanvas"),t=document.createElement("video"),o=document.createElement("canvas"),n=o.getContext("2d");o.width=e.width,o.height=e.height;const i={executionProviders:["wasm"],executionMode:"parallel",graphOptimizationLevel:"all"};window.timestamps=Array(25).fill(performance.now());const a=async()=>{n.drawImage(t,0,0,window.width,window.height,0,0,o.width,o.height);const i=await ort.Tensor.fromImage(n.getImageData(0,0,o.width,o.height)),{output:s}=await window.session.run({input:i});e.getContext("2d").putImageData(s.toImageData({format:"RGB",norm:{mean:1}}),0,0),window.timestamps.shift(),window.timestamps[24]=performance.now(),document.getElementById("fps").innerHTML=1e3/(window.timestamps[24]-window.timestamps[0])*25,requestAnimationFrame(a)};return window.onload=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((async e=>{ort.env.wasm.proxy=!0,ort.env.wasm.numThreads=6;const o=await ort.InferenceSession.create("/build/mosaic_36.onnx",i);window.session=o,t.srcObject=e,t.play(),window.width=e.getVideoTracks()[0].getSettings().width,window.height=e.getVideoTracks()[0].getSettings().height,a()})).catch((e=>console.error(e)))},{}})()));